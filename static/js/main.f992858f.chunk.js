(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],{17:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return j}));var a=n(4),r=n.n(a),c=n(12),i=n(2),s=n(8),u="social-network/auth/SET_USER_DATA",o={id:null,email:null,login:null,isAuth:!1},l=function(e,t,n,a){return{type:u,payload:{id:e,email:t,login:n,isAuth:a}}},d=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,i,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.me();case 2:0===(n=e.sent).data.resultCode&&(a=n.data.data,c=a.id,i=a.email,u=a.login,t(l(c,i,u,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function(e,t,n,a,i,u){return function(){var a=Object(c.a)(r.a.mark((function a(c){var i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.login(e,t,n);case 2:0===(i=a.sent).data.resultCode?c(d()):u(i.data.messages);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},j=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.logout();case 2:0===e.sent.data.resultCode&&t(l(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(i.a)(Object(i.a)({},e),t.payload);default:return e}}},18:function(e,t,n){e.exports={header:"Header_header__3Evoe",headerLogo:"Header_headerLogo__2CSgx",headerName:"Header_headerName__2lBO1",userAvatar:"Header_userAvatar__2IpXl",userData:"Header_userData__2PbhD",buttonLogout:"Header_buttonLogout__3jbFi"}},21:function(e,t,n){"use strict";n(0);var a=n.p+"static/media/Loader.6281c6f4.gif",r=n(1);t.a=function(e){return Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:a})})}},28:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return O})),n.d(t,"e",(function(){return g}));var a=n(4),r=n.n(a),c=n(12),i=n(19),s=n(2),u=n(8),o="ADD-POST",l="SET_USER_PROFILE",d="SET_STATUS",f="DELETE_POST",j={posts:[{id:1,message:"Hi, how are you?",likesCount:"15"},{id:2,message:"It's my first post",likesCount:"7"},{id:3,message:"WTF",likesCount:"22"}],profile:null,status:""},b=function(e){return{type:o,newPostText:e}},p=function(e){return{type:d,status:e}},h=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.getProfile(e);case 2:a=t.sent,n({type:l,profile:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.getStatus(e);case 2:a=t.sent,n(p(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(p(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var n={id:5,message:t.newPostText,likesCount:0};return Object(s.a)(Object(s.a)({},e),{},{posts:[].concat(Object(i.a)(e.posts),[n])});case l:return Object(s.a)(Object(s.a)({},e),{},{profile:t.profile});case d:return Object(s.a)(Object(s.a)({},e),{},{status:t.status});case f:return Object(s.a)(Object(s.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.id}))});default:return e}}},38:function(e,t,n){"use strict";t.a=n.p+"static/media/User-Icon.d1cae9a1.jpg"},49:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var a=n(19),r=n(2),c="SEND_MESSAGE",i={dialogs:[{id:1,name:"Dimych",avatar:"https://demiart.ru/forum/journal_uploads13/j2406363_1591724080_0.jpg"},{id:2,name:"Valera",avatar:"https://www.meme-arsenal.com/memes/0b37d82bcfd11cb3196fa5329f3bff0f.jpg"},{id:3,name:"Sasha",avatar:"https://whatsism.com/uploads/posts/2018-07/1530546770_rmk_vdjbx10.jpg"},{id:4,name:"Lena",avatar:"https://cs9.pikabu.ru/post_img/big/2020/03/30/6/1585562132190522557.jpg"},{id:5,name:"Vika",avatar:"https://i.pinimg.com/originals/4a/bc/c0/4abcc00427dbb86ee5da8270b52204f8.jpg"},{id:6,name:"Egor",avatar:"https://cs7.pikabu.ru/post_img/big/2018/10/20/9/154004999513599819.jpg"}],messages:[{id:1,message:"Hello, i am busy"},{id:2,message:"No, thank you"},{id:3,message:"Goodnight"},{id:4,message:"Ok"},{id:5,message:"Yo, man"},{id:6,message:"Yo"}]},s=function(e){return{type:c,newMessageBody:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n=t.newMessageBody;return Object(r.a)(Object(r.a)({},e),{},{messages:[].concat(Object(a.a)(e.messages),[{id:6,message:n}])});default:return e}}},50:function(e,t,n){"use strict";n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return _})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return N})),n.d(t,"f",(function(){return S}));var a=n(4),r=n.n(a),c=n(12),i=n(19),s=n(2),u=n(8),o=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(s.a)(Object(s.a)({},e),a):e}))},l="FOLLOW",d="UNFOLLOW",f="SET_USERS",j="SET_CURRENT_PAGE",b="SET_TOTAL_USERS_COUNT",p="TOGGLE_IS_FETCHING",h="TOGGLE_IS_FOLLOWING_PROGRESS",O={users:[],pageSize:15,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},g=function(e){return{type:l,userId:e}},m=function(e){return{type:d,userId:e}},v=function(e){return{type:j,currentPage:e}},x=function(e){return{type:p,isFetching:e}},_=function(e,t){return{type:h,isFetching:e,userId:t}},w=function(e,t){return function(){var n=Object(c.a)(r.a.mark((function n(a){var c;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(x(!0)),a(v(e)),n.next=4,u.c.getUsers(e,t);case 4:c=n.sent,a(x(!1)),a((i=c.data.items,{type:f,users:i})),a((r=c.data.totalCount,{type:b,count:r}));case 8:case"end":return n.stop()}var r,i}),n)})));return function(e){return n.apply(this,arguments)}}()},y=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(_(!0,n)),e.next=3,a(n);case 3:0===e.sent.data.resultCode&&t(c(n)),t(_(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),N=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y(n,e,u.c.follow.bind(u.c),g);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y(n,e,u.c.unfollow.bind(u.c),m);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(s.a)(Object(s.a)({},e),{},{users:o(e.users,t.userId,"id",{followed:!0})});case d:return Object(s.a)(Object(s.a)({},e),{},{users:o(e.users,t.userId,"id",{followed:!1})});case f:return Object(s.a)(Object(s.a)({},e),{},{users:t.users});case j:return Object(s.a)(Object(s.a)({},e),{},{currentPage:t.currentPage});case b:return Object(s.a)(Object(s.a)({},e),{},{totalUsersCount:t.count});case p:return Object(s.a)(Object(s.a)({},e),{},{isFetching:t.isFetching});case h:return Object(s.a)(Object(s.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(i.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}}},51:function(e,t,n){e.exports={avatar:"Sidebar_avatar__3A7cT"}},56:function(e,t,n){},6:function(e,t,n){e.exports={nav:"Navbar_nav__3-TCR",item:"Navbar_item__3uIrE",activeLink:"Navbar_activeLink__1r9vw",friends:"Navbar_friends__2j9hH"}},60:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},8:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var a=n(52),r=n.n(a).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"e11ded1e-8230-4e47-8077-69d9dbc29103"}}),c={getUsers:function(e,t){return r.get("users?page=".concat(e,"&count=").concat(t))},unfollow:function(e){return r.delete("follow/".concat(e))},follow:function(e){return r.post("follow/".concat(e))}},i={getProfile:function(e){return r.get("profile/"+e).then((function(e){return e.data}))},getStatus:function(e){return r.get("/profile/status/"+e)},updateStatus:function(e){return r.put("/profile/status",{status:e})}},s={me:function(){return r.get("auth/me")},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.post("auth/login",{email:e,password:t,rememberMe:n})},logout:function(){return r.delete("auth/login")}}},88:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=(n(56),function(e){e&&e instanceof Function&&n.e(8).then(n.bind(null,255)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))}),i=n(29),s=n.n(i),u=n(24),o=n(25),l=n(26),d=n(27),f=(n(60),n(6)),j=n.n(f),b=n(10),p=n(51),h=n.n(p),O=n(1),g=function(e){return Object(O.jsx)("div",{className:h.a.avatar,children:Object(O.jsx)("img",{src:e.avatar})})},m=function(e){var t=e.state.sidebarPage.friends.map((function(e){return Object(O.jsx)(g,{avatar:e.avatar,id:e.id},e.id)}));return Object(O.jsxs)("nav",{className:j.a.nav,children:[Object(O.jsx)("div",{className:j.a.item,children:Object(O.jsx)(b.b,{to:"/profile",activeClassName:j.a.activeLink,children:"Profile"})}),Object(O.jsx)("div",{className:j.a.item,children:Object(O.jsx)(b.b,{to:"/users",activeClassName:j.a.activeLink,children:"Users"})}),Object(O.jsx)("div",{className:"".concat(j.a.item," ").concat(j.a.active),children:Object(O.jsx)(b.b,{to:"/dialogs",activeClassName:j.a.activeLink,children:"Messages"})}),Object(O.jsx)("div",{className:j.a.item,children:Object(O.jsx)(b.b,{to:"/news",activeClassName:j.a.activeLink,children:"News"})}),Object(O.jsx)("div",{className:j.a.item,children:Object(O.jsx)(b.b,{to:"/music",activeClassName:j.a.activeLink,children:"Music"})}),Object(O.jsx)("div",{className:j.a.item,children:Object(O.jsx)(b.b,{to:"/settings",activeClassName:j.a.activeLink,children:"Settings"})}),Object(O.jsxs)("div",{className:j.a.friends,children:[Object(O.jsx)(b.b,{to:"/users",activeClassName:j.a.activeLink,children:"Friends"}),Object(O.jsx)("div",{className:j.a.avatarBlock,children:t})]})]})},v=n(16),x=n(15),_=Object(x.c)(Object(v.b)((function(e){return{state:e}}),(function(e){return{}})))(m),w=n(5),y=(n(66),function(){return Object(O.jsx)("div",{children:"Music"})}),N=(n(67),function(){return Object(O.jsx)("div",{children:"News"})}),S=(n(68),function(){return Object(O.jsx)("div",{children:"Settings"})}),k=n(2),L=n(18),E=n.n(L),C=n.p+"static/media/logo.a5f4c229.png",P=n(21),I=n(38),T=function(e){return e.profile?Object(O.jsxs)("header",{className:E.a.header,children:[Object(O.jsx)("div",{className:E.a.headerLogo,children:Object(O.jsx)("img",{src:C})}),Object(O.jsx)("div",{className:E.a.headerName,children:Object(O.jsx)("b",{children:"SN"})}),Object(O.jsx)("div",{className:E.a.userAvatar,children:e.isAuth?Object(O.jsx)("img",{src:null===e.profile.photos.small?I.a:null}):null}),Object(O.jsxs)("div",{className:E.a.userData,children:[Object(O.jsxs)("div",{children:["User: ",e.isAuth?e.login:Object(O.jsx)(b.b,{to:"/login",children:"Login"})]}),Object(O.jsxs)("div",{children:["Email: ",e.email]})]}),Object(O.jsx)("div",{className:E.a.buttonLogout,children:e.isAuth?Object(O.jsx)("button",{onClick:e.logout,children:"Log out"}):Object(O.jsx)(b.b,{to:"/login",children:"Login"})})]}):Object(O.jsx)(P.a,{})},A=n(17),U=n(28),F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsx)(T,Object(k.a)(Object(k.a)({},this.props),{},{profile:this.props.profile}))}}]),n}(r.a.Component),D=Object(x.c)(Object(v.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,email:e.auth.email,profile:e.profilePage.profile}}),{getAuthUserData:A.b,getUserProfile:U.d,logout:A.d}))(F),z="INITIALIZED_SUCCESS",R={initialized:!1},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(k.a)(Object(k.a)({},e),{},{initialized:!0});default:return e}},H=n(49),M={friends:[{id:1,name:"Dimych",avatar:"https://demiart.ru/forum/journal_uploads13/j2406363_1591724080_0.jpg"},{id:2,name:"Lena",avatar:"https://cs9.pikabu.ru/post_img/big/2020/03/30/6/1585562132190522557.jpg"},{id:3,name:"Vika",avatar:"https://i.pinimg.com/originals/4a/bc/c0/4abcc00427dbb86ee5da8270b52204f8.jpg"}]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return e},V=n(50),W=n(53),X=Object(x.b)({profilePage:U.b,dialogsPage:H.a,sidebarPage:B,usersPage:V.a,auth:A.a,app:G}),Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||x.c,J=Object(x.d)(X,Y(Object(x.a)(W.a)));window.__store__=J;var K=J,Z=r.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,258))})),q=r.a.lazy((function(){return n.e(5).then(n.bind(null,257))})),Q=r.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,256))})),$=r.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,259))})),ee=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(this.props.userId)}},{key:"render",value:function(){return this.props.initialized?Object(O.jsxs)("div",{className:"app-wrapper",children:[Object(O.jsx)(D,{}),Object(O.jsx)(_,{}),Object(O.jsx)("div",{className:"app-wrapper-content",children:Object(O.jsxs)(r.a.Suspense,{fallback:Object(O.jsx)(P.a,{}),children:[Object(O.jsx)(w.b,{path:"/dialogs",render:function(){return Object(O.jsx)(Z,{})}}),Object(O.jsx)(w.b,{path:"/profile/:userId?",render:function(){return Object(O.jsx)(Q,{})}}),Object(O.jsx)(w.b,{path:"/users",render:function(){return Object(O.jsx)(q,{})}}),Object(O.jsx)(w.b,{path:"/login",render:function(){return Object(O.jsx)($,{})}}),Object(O.jsx)(w.b,{path:"/music",render:function(){return Object(O.jsx)(y,{})}}),Object(O.jsx)(w.b,{path:"/news",render:function(){return Object(O.jsx)(N,{})}}),Object(O.jsx)(w.b,{path:"/settings",render:function(){return Object(O.jsx)(S,{})}})]})})]}):Object(O.jsx)(P.a,{})}}]),n}(a.Component),te=Object(x.c)(w.f,Object(v.b)((function(e){return{initialized:e.app.initialized,userId:e.auth.id}}),{initializeApp:function(e){return function(e){var t=e(Object(A.b)());Promise.all([t]).then((function(){e({type:z})}))}}}))(ee),ne=function(e){return Object(O.jsx)(b.a,{children:Object(O.jsx)(v.a,{store:K,children:Object(O.jsx)(te,{})})})};s.a.render(Object(O.jsx)(ne,{}),document.getElementById("root")),c()}},[[88,2,3]]]);
//# sourceMappingURL=main.f992858f.chunk.js.map